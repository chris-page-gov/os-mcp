swagger: '2.0'
info:
  title: OS MCP Server
  description: OS DataHub API MCP Server - Ordnance Survey geospatial data access through Model Context Protocol for streamable MCP support in Copilot Studio
  version: 1.0.0
  contact:
    name: OS MCP Server
    url: https://github.com/chris-page-gov/os-mcp
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
host: 127.0.0.1:8000
basePath: /
schemes:
  - http
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /mcp:
    post:
      summary: OS DataHub Geospatial Data MCP Server
      description: |
        Access UK Ordnance Survey geospatial data through Model Context Protocol.
        Provides tools for searching streets, buildings, addresses, land use data and more
        across the UK using bounding boxes, postcodes, and advanced CQL filtering.
      x-ms-agentic-protocol: mcp-streamable-1.0
      operationId: InvokeMCP
      parameters:
        - name: body
          in: body
          description: MCP JSON-RPC request
          required: true
          schema:
            type: object
            properties:
              jsonrpc:
                type: string
                default: "2.0"
              id:
                type: string
                default: "1"
              method:
                type: string
                description: MCP method to invoke
                enum:
                  - initialize
                  - tools/list
                  - tools/call
                default: "tools/call"
              params:
                type: object
                description: Method parameters
                properties:
                  name:
                    type: string
                    description: Tool name (for tools/call)
                    default: "search_features"
                  arguments:
                    type: object
                    description: Tool arguments
                    properties:
                      collection_id:
                        type: string
                        default: "trn-ntwk-street-1"
                      bbox:
                        type: string
                        default: "-1.16,52.95,-1.15,52.96"
                      filter:
                        type: string
                      limit:
                        type: integer
                        default: 10
      responses:
        '200':
          description: Success
          schema:
            type: object
            properties:
              jsonrpc:
                type: string
                example: "2.0"
              id:
                type: string
                description: Request ID
              result:
                type: object
                description: MCP response data
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
definitions:
  MCPRequest:
    type: object
    required:
      - method
    properties:
      jsonrpc:
        type: string
        example: "2.0"
      id:
        type: string
        description: Request identifier
      method:
        type: string
        description: MCP method name
      params:
        type: object
        description: Method parameters
  MCPResponse:
    type: object
    properties:
      jsonrpc:
        type: string
        example: "2.0"
      id:
        type: string
        description: Request identifier
      result:
        type: object
        description: Method result
      error:
        type: object
        description: Error information
        properties:
          code:
            type: integer
          message:
            type: string
  GeoJSONFeature:
    type: object
    description: GeoJSON Feature object returned by geospatial searches
    properties:
      type:
        type: string
        example: "Feature"
      id:
        type: string
        description: Feature identifier
      geometry:
        type: object
        description: GeoJSON geometry
        properties:
          type:
            type: string
            example: "Point"
          coordinates:
            type: array
            items:
              type: number
            example: [-1.1543, 52.9548]
      properties:
        type: object
        description: Feature properties/attributes
        additionalProperties: true
securityDefinitions:
  BearerAuth:
    type: apiKey
    name: Authorization
    in: header
    description: "Enter: Bearer dev-token"
security:
  - BearerAuth: []
tags:
  - name: MCP
    description: Model Context Protocol operations
  - name: Authentication
    description: Authentication and discovery
externalDocs:
  description: OS MCP Server Documentation
  url: https://github.com/chris-page-gov/os-mcp
